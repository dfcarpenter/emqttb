%% -*- mode: erlang -*-
{erl_opts, [debug_info]}.

{deps,
  [ {emqtt, {git, "https://github.com/emqx/emqtt", {tag, "1.4.4"}}}
    %% TODO: remove me after bumping dependency in Lee
  , {typerefl, {git, "https://github.com/ieQu1/typerefl", {tag, "0.9.2"}}}
  , {lee, {git, "https://github.com/k32/lee", {tag, "0.2.0"}}}
  , {snabbkaffe, {git, "https://github.com/kafka4beam/snabbkaffe", {tag, "1.0.1"}}}
  , {prometheus, "4.8.1"}
  , {prometheus_push, {git, "https://github.com/deadtrickster/prometheus-push", {branch, "master"}}} %% TODO
  , {cowboy,     "2.9.0"}
  , {jsone,      "1.7.0"}
  ]}.

{relx,
  [ {release, {emqttb, "0.1.0"}, [emqttb, kernel]}
  , {mode, dev}
  , {sys_config_src, "./config/sys.config.src"}
  , {vm_args_src, "./config/vm.args.src"}
  ]}.

{profiles,
 [ {prod,
    [ {relx, [{mode, prod}]}
    ]}
 ]}.

{escript_include_apps, [kernel, emqttb]}.

{ct_readable, false}.
